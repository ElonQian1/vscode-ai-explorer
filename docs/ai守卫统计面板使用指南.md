# AI守卫统计面板演示

## 功能预览

### 1. 统计面板功能
- 📊 **累计过滤数**: 显示总过滤词汇数量
- 🤖 **发送AI数**: 显示需要AI翻译的词汇数量  
- 💰 **总节省率**: 显示节省的AI请求比例
- ⚡ **会话节省率**: 显示本次会话的实时节省比例
- 🎯 **过滤原因分布**: 饼图显示各种过滤原因的占比
- 📋 **详细统计**: 列表显示每个过滤原因的具体数量

### 2. 实时功能
- ⏱️ **自动刷新**: 每5秒自动更新数据
- 🔄 **手动刷新**: 点击刷新按钮立即更新
- 🗑️ **重置功能**: 支持重置全部数据或仅重置会话数据

### 3. 状态栏集成
- 🛡️ **AI守卫状态**: 状态栏显示当前节省比例
- 📊 **快速访问**: 点击状态栏项可直接打开统计面板

## 使用方法

### 通过命令面板
1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 `AI守卫` 查找相关命令：
   - `🛡️ AI守卫：显示统计面板`
   - `🛡️ AI守卫：重置统计数据`
   - `🛡️ AI守卫：刷新统计显示`

### 通过状态栏
- 查看右下角状态栏的 `🛡️` 图标
- 显示格式：`🛡️ 节省率% (过滤数)`
- 点击图标直接打开统计面板

### 自动数据收集
- 当使用AI翻译功能时，系统自动记录统计数据
- 数据持久化存储在 `.ai/.ai-guard-stats.json`
- 支持跨会话数据保持

## 统计数据说明

### 过滤原因类型
- 📊 **数字**: 过滤纯数字ID和无意义数值
- 🏷️ **版本号**: 过滤版本标识如v1.0.0
- 🔐 **哈希值**: 过滤MD5、SHA等哈希字符串
- 🔤 **缩写词**: 白名单中的技术缩写词
- ⛔ **停用词**: 常见的停用词汇
- 📝 **占位符**: 临时文件名和占位符
- 📏 **过短词汇**: 长度过短的无意义词汇
- ⚙️ **自定义规则**: 用户定义的过滤规则

### 节省率计算
```
节省率 = 过滤词数 / (过滤词数 + 发送AI词数) × 100%
```

## 技术特性

- ✅ **CSP安全**: 符合VS Code内容安全策略
- ✅ **Chart.js集成**: 使用Chart.js绘制饼图
- ✅ **响应式设计**: 自适应面板大小
- ✅ **实时更新**: 支持数据实时刷新
- ✅ **持久化存储**: 数据自动保存和加载
- ✅ **防抖保存**: 避免频繁IO操作
- ✅ **主题适配**: 自动适配VS Code主题

## 数据文件

统计数据存储位置：
```
工作区根目录/.ai/.ai-guard-stats.json
```

数据结构示例：
```json
{
  "totalDropped": 1523,
  "totalKept": 432,
  "reasonDistribution": {
    "numeric": 456,
    "version": 234,
    "hash": 123,
    "custom:temp-file": 67
  },
  "startTime": 1702345678000,
  "lastUpdateTime": 1702456789000,
  "sessionStats": {
    "dropped": 45,
    "kept": 12,
    "reasons": {
      "numeric": 12,
      "version": 5
    }
  }
}
```