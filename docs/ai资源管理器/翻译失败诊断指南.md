# ç¿»è¯‘å¤±è´¥è¯Šæ–­æŒ‡å—

## é—®é¢˜ç°è±¡

```
â„¹ï¸ æ–‡ä»¶æ— éœ€ç¿»è¯‘ï¼šanalyze_hierarchy_simple.cjs
```

æ–‡ä»¶åæ˜æ˜æ˜¯è‹±æ–‡ï¼Œå´æ˜¾ç¤º"æ— éœ€ç¿»è¯‘"ã€‚

## ğŸ” é—®é¢˜åŸå› 

è¿™ä¸ªæç¤º**ä¸æ˜¯è¯´æ–‡ä»¶ä¸éœ€è¦ç¿»è¯‘**ï¼Œè€Œæ˜¯è¯´**ç¿»è¯‘åçš„ç»“æœå’ŒåŸæ–‡ä»¶åç›¸åŒ**ã€‚

### ä»£ç é€»è¾‘

```typescript
// AIExplorerProvider.ts ç¬¬ 424-428 è¡Œ
if (result.translated !== result.original) {
    vscode.window.showInformationMessage(
        `âœ… å·²ç¿»è¯‘ï¼š${fileName} â†’ ${result.translated}ï¼ˆæ¥æºï¼š${sourceName}ï¼‰`
    );
} else {
    vscode.window.showInformationMessage(
        `â„¹ï¸ æ–‡ä»¶æ— éœ€ç¿»è¯‘ï¼š${fileName}`  // â† è¿™é‡Œ
    );
}
```

å½“ `result.translated === result.original` æ—¶ï¼ˆç¿»è¯‘ç»“æœ=åŸæ–‡ä»¶åï¼‰ï¼Œå°±ä¼šæ˜¾ç¤º"æ–‡ä»¶æ— éœ€ç¿»è¯‘"ã€‚

### ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

ç¿»è¯‘é“¾è·¯ï¼š**ç¼“å­˜ â†’ è¯å…¸ â†’ è§„åˆ™ â†’ AI â†’ Fallback**

```typescript
// EnhancedTranslateBatchUseCase.ts ç¬¬ 207-216 è¡Œ
} else {
    // AI ç¿»è¯‘å¤±è´¥ï¼Œä½¿ç”¨åŸå
    const result: TranslationResult = {
        original: file.name,
        translated: file.name,  // â† ç¿»è¯‘ç»“æœ=åŸæ–‡ä»¶å
        confidence: 0.0,
        source: 'fallback',    // â† æ¥æºæ˜¯ fallback
        timestamp: Date.now()
    };
    
    results.set(file, result);
}
```

**å½“ AI ç¿»è¯‘å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè¿”å›ä¸€ä¸ª `fallback` ç»“æœï¼Œç¿»è¯‘å†…å®¹å°±æ˜¯åŸæ–‡ä»¶å**ã€‚

## ğŸ› ï¸ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥ AI é…ç½®

```
1. Ctrl+Shift+P
2. è¿è¡Œå‘½ä»¤ï¼šAI èµ„æºç®¡ç†å™¨ï¼šæ£€æŸ¥AIçŠ¶æ€
3. æŸ¥çœ‹è¾“å‡º
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… AI æœåŠ¡çŠ¶æ€
OpenAI: âœ… å¯ç”¨
è…¾è®¯æ··å…ƒ: âœ… å¯ç”¨
ä¸»æä¾›å•†: OpenAI
```

**å¦‚æœæ˜¾ç¤º**ï¼š
```
âŒ OpenAI: ä¸å¯ç”¨
âŒ è…¾è®¯æ··å…ƒ: ä¸å¯ç”¨
```

â†’ **åŸå› **: AI æœåŠ¡æœªé…ç½®

**è§£å†³æ–¹æ³•**ï¼š
```
1. Ctrl+Shift+P
2. è¿è¡Œï¼šAI èµ„æºç®¡ç†å™¨ï¼šè®¾ç½® OpenAI API Key
3. è¾“å…¥ä½ çš„ API Key
4. é‡æ–°å°è¯•ç¿»è¯‘
```

### æ­¥éª¤ 2: æŸ¥çœ‹è¾“å‡ºæ—¥å¿—

```
1. æ‰“å¼€ VS Code è¾“å‡ºé¢æ¿
   - èœå•ï¼šè§†å›¾ â†’ è¾“å‡º
   - æˆ–å¿«æ·é”®ï¼šCtrl+Shift+U

2. åœ¨å³ä¸Šè§’ä¸‹æ‹‰æ¡†é€‰æ‹© "AI Explorer"

3. æŸ¥çœ‹æ—¥å¿—
```

**æŸ¥æ‰¾å…³é”®ä¿¡æ¯**ï¼š

```
// å¥½çš„æ—¥å¿—
[INFO] å¼€å§‹ AI ç¿»è¯‘ 1 ä¸ªæ–‡ä»¶
[INFO] AI ç¿»è¯‘æˆåŠŸ: analyze_hierarchy_simple.cjs -> åˆ†æå±‚çº§ç®€åŒ–è„šæœ¬

// åçš„æ—¥å¿—
[ERROR] æ‰¹é‡ç¿»è¯‘å¤±è´¥ (batch 1): AI æœåŠ¡ä¸å¯ç”¨
[WARN] å•ä¸ªç¿»è¯‘å¤±è´¥: analyze_hierarchy_simple.cjs
```

### æ­¥éª¤ 3: æµ‹è¯• AI ç¿»è¯‘

```
1. Ctrl+Shift+P
2. è¿è¡Œï¼šAI èµ„æºç®¡ç†å™¨ï¼šæµ‹è¯•AIç¿»è¯‘
3. è¾“å…¥æµ‹è¯•æ–‡æœ¬ï¼Œå¦‚ï¼šUserService
4. æŸ¥çœ‹ç¿»è¯‘ç»“æœ
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… AI ç¿»è¯‘æµ‹è¯•æˆåŠŸ
åŸæ–‡: UserService
è¯‘æ–‡: ç”¨æˆ·æœåŠ¡
æ¥æº: AI
```

**å¦‚æœå¤±è´¥**ï¼š
```
âŒ AI ç¿»è¯‘å¤±è´¥: æœªé…ç½® API Key
âŒ AI ç¿»è¯‘å¤±è´¥: ç½‘ç»œè¿æ¥è¶…æ—¶
âŒ AI ç¿»è¯‘å¤±è´¥: API Key æ— æ•ˆ
```

### æ­¥éª¤ 4: å¼ºåˆ¶é‡æ–°ç¿»è¯‘ï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰

å¦‚æœç¼“å­˜ä¸­ä¿å­˜äº†é”™è¯¯çš„ç»“æœï¼š

```
1. åœ¨ AI Explorer è§†å›¾ä¸­
2. å³é”®ç‚¹å‡»æ–‡ä»¶
3. é€‰æ‹© "æ¸…é™¤èŠ‚ç‚¹ç¼“å­˜"
4. å†æ¬¡å³é”® â†’ "ç¿»è¯‘æ­¤æ–‡ä»¶"
```

### æ­¥éª¤ 5: æ£€æŸ¥ç½‘ç»œè¿æ¥

```powershell
# æµ‹è¯• OpenAI è¿é€šæ€§
Test-NetConnection api.openai.com -Port 443

# æµ‹è¯•è…¾è®¯æ··å…ƒè¿é€šæ€§
Test-NetConnection hunyuan.cloud.tencent.com -Port 443
```

## ğŸ“Š å¸¸è§åŸå› å¯¹ç…§è¡¨

| ç—‡çŠ¶ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| **â„¹ï¸ æ–‡ä»¶æ— éœ€ç¿»è¯‘** | AI ç¿»è¯‘è¿”å›ç©º/å¤±è´¥ | æ£€æŸ¥ AI é…ç½®å’Œæ—¥å¿— |
| **æ¥æºï¼šfallback** | AI æœåŠ¡ä¸å¯ç”¨ | è®¾ç½® API Key |
| **æ¥æºï¼šerror** | AI è°ƒç”¨å¼‚å¸¸ | æŸ¥çœ‹é”™è¯¯æ—¥å¿— |
| **æ¥æºï¼šç¼“å­˜** | ä½¿ç”¨äº†ä¹‹å‰çš„é”™è¯¯ç¼“å­˜ | æ¸…é™¤ç¼“å­˜åé‡è¯• |
| **é€Ÿåº¦å¾ˆæ…¢** | ç½‘ç»œé—®é¢˜ | æ£€æŸ¥ç½‘ç»œè¿æ¥ |

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: é…ç½® OpenAI

```
1. è·å– API Key: https://platform.openai.com/api-keys
2. Ctrl+Shift+P â†’ "è®¾ç½® OpenAI API Key"
3. ç²˜è´´ API Key
4. æµ‹è¯•ç¿»è¯‘
```

### æ–¹æ¡ˆ 2: é…ç½®è…¾è®¯æ··å…ƒ

```
1. è·å– API Key: https://cloud.tencent.com/product/hunyuan
2. Ctrl+Shift+P â†’ "è®¾ç½®è…¾è®¯æ··å…ƒ API Key"
3. ç²˜è´´ SecretId å’Œ SecretKey
4. é€‰æ‹©ä¸»æä¾›å•†ä¸º "è…¾è®¯æ··å…ƒ"
```

### æ–¹æ¡ˆ 3: æ£€æŸ¥ä»£ç†è®¾ç½®

å¦‚æœä½ åœ¨å›½å†…ï¼Œè®¿é—® OpenAI å¯èƒ½éœ€è¦ä»£ç†ï¼š

```json
// VS Code settings.json
{
  "http.proxy": "http://127.0.0.1:7890",
  "http.proxyStrictSSL": false
}
```

### æ–¹æ¡ˆ 4: æ‰‹åŠ¨æ·»åŠ åˆ°è¯å…¸

å¦‚æœ AI æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨æ·»åŠ ç¿»è¯‘ï¼š

```
1. æ‰¾åˆ°è¯å…¸æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
2. ç¼–è¾‘ dictionary.json
3. æ·»åŠ æ¡ç›®ï¼š
   {
     "analyze_hierarchy_simple.cjs": "åˆ†æå±‚çº§ç®€åŒ–è„šæœ¬"
   }
4. åˆ·æ–° AI Explorer
```

## ğŸ§ª å®Œæ•´è¯Šæ–­æµç¨‹

```
â”Œâ”€ 1. è¿è¡Œ "æ£€æŸ¥AIçŠ¶æ€"
â”‚  â””â”€ âŒ AI ä¸å¯ç”¨
â”‚     â””â”€ è®¾ç½® API Key
â”‚        â””â”€ é‡æ–°æ£€æŸ¥
â”‚
â”œâ”€ 2. æŸ¥çœ‹è¾“å‡ºæ—¥å¿—
â”‚  â””â”€ æ‰¾åˆ°é”™è¯¯ä¿¡æ¯
â”‚     â””â”€ æ ¹æ®é”™è¯¯ç±»å‹è§£å†³
â”‚
â”œâ”€ 3. æµ‹è¯• AI ç¿»è¯‘
â”‚  â””â”€ âœ… ç¿»è¯‘æˆåŠŸ
â”‚     â””â”€ é—®é¢˜å¯èƒ½æ˜¯ç¼“å­˜
â”‚        â””â”€ æ¸…é™¤ç¼“å­˜é‡è¯•
â”‚
â””â”€ 4. å³é”®ç¿»è¯‘æ–‡ä»¶
   â””â”€ æŸ¥çœ‹æç¤ºä¿¡æ¯
      â”œâ”€ "æ¥æºï¼šAI" â†’ âœ… æˆåŠŸ
      â”œâ”€ "æ¥æºï¼šfallback" â†’ âŒ AI å¤±è´¥
      â””â”€ "æ¥æºï¼šerror" â†’ âŒ ä¸¥é‡é”™è¯¯
```

## ğŸ’¡ æ”¹è¿›å»ºè®®

### æ”¹è¿›æç¤ºä¿¡æ¯

å½“å‰çš„æç¤ºä¿¡æ¯æœ‰è¯¯å¯¼æ€§ã€‚å»ºè®®ä¿®æ”¹ä¸ºï¼š

```typescript
// ä¿®æ”¹å‰
vscode.window.showInformationMessage(`â„¹ï¸ æ–‡ä»¶æ— éœ€ç¿»è¯‘ï¼š${fileName}`);

// ä¿®æ”¹å
vscode.window.showInformationMessage(
    `âš ï¸ ç¿»è¯‘å¤±è´¥æˆ–æ— å˜åŒ–ï¼š${fileName}ï¼ˆæ¥æºï¼š${sourceName}ï¼‰\n` +
    `æç¤ºï¼šå¦‚æœæ¥æºæ˜¯ "fallback" æˆ– "error"ï¼Œè¯·æ£€æŸ¥ AI æœåŠ¡é…ç½®`
);
```

### æ·»åŠ æ›´è¯¦ç»†çš„æ—¥å¿—

```typescript
if (result.translated !== result.original) {
    // æˆåŠŸ
} else {
    this.logger.warn(`ç¿»è¯‘ç»“æœä¸åŸæ–‡ç›¸åŒ: ${fileName}, æ¥æº: ${result.source}`);
    
    if (result.source === 'fallback' || result.source === 'error') {
        vscode.window.showWarningMessage(
            `âš ï¸ ${fileName} ç¿»è¯‘å¤±è´¥ï¼Œè¯·æ£€æŸ¥ AI æœåŠ¡é…ç½®`,
            'æ£€æŸ¥AIçŠ¶æ€',
            'è®¾ç½®API Key'
        ).then(action => {
            if (action === 'æ£€æŸ¥AIçŠ¶æ€') {
                vscode.commands.executeCommand('aiExplorer.checkAIStatus');
            } else if (action === 'è®¾ç½®API Key') {
                vscode.commands.executeCommand('aiExplorer.setOpenAIKey');
            }
        });
    }
}
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [AI é…ç½®æŒ‡å—](./AIè¯Šæ–­å’Œæµ‹è¯•æŒ‡å—.md)
- [ç¿»è¯‘åŠŸèƒ½è¯´æ˜](./å³é”®å•ç‹¬ç¿»è¯‘æ–‡ä»¶-ä½¿ç”¨æŒ‡å—.md)
- [æ•…éšœæ’æŸ¥](./troubleshooting.md)
