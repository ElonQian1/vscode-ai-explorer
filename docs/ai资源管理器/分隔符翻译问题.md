你这个结果“**clean-xml-files.js → cleanxmlfiles 模块**”暴露了两件事：

1. 当前走的不是“**保留分隔符的直译 V2**”，而是早期“**拼接中文 + 加后缀**”的规则（或 joiner 被设成了空串，且把 `.js` 映射成了“模块”）。
2. 词典/分词没按“逐词+保留分隔符”去重建，导致 `-` 被吞、`xml/files` 没翻译。

你要的风格是“死板又快”：**保留原始分隔符**（`-`/`_`/`.`）和扩展名，只把英文词逐个替换成中文；命不中的词再让 AI 只补**词典映射**。下面给你最小修复：

---

# 一步修好（配置 + 2 处小改）

## 1) 配置项（保留原分隔符 & 不加中文后缀）

把这三项设定好（`settings.json`）：

```json
{
  "aiSuite.alias.style": "literal", // 使用直译风格
  "aiSuite.alias.keepOriginalDelimiters": true, // ✅ 保留原始分隔符（关键！）
  "aiSuite.alias.appendExtSuffix": false // ✅ 不再把 .js 变成“模块/脚本”
}
```

> 如果你还没有 `keepOriginalDelimiters` 这个开关，按下面第 2 步补一行代码就有了。

## 2) 生成别名时“保留分隔符”

在你用于直译的 builder（我之前给的 `LiteralPreserveWithAIFallback`）里，把重建函数改成读取配置：

```ts
// 文件名: src/features/explorer-alias/domain/policies/LiteralPreserveWithAIFallback.ts

function rebuild(mapped: string[], delims: string[], ext: string) {
  const cfg = vscode.workspace.getConfiguration("aiSuite");
  const keepDelims = cfg.get<boolean>(
    "aiSuite.alias.keepOriginalDelimiters",
    true
  );
  const joiner = cfg.get<string>("aiSuite.alias.literalJoiner", "_");
  const keepExt = true; // 你就喜欢“死板”，扩展名也保留

  let s = "";
  for (let i = 0; i < mapped.length; i++) {
    s += mapped[i] + (keepDelims ? delims[i] || "" : joiner);
  }
  if (keepExt && ext) s += "." + ext;
  return s.replace(/[\\/:*?"<>|]/g, "·").slice(0, 120);
}
```

> 这样：`clean-xml-files.js` →（有词典时）**清理-XML-文件.js**；
> 没有词典时先保留英文，再触发 AI 只补“缺词映射”，写回后第二次就稳定出 **清理-XML-文件.js**。

## 3) 词典补两条，避免再靠 AI

把这些写进项目直译词典 `/.ai/.ai-literal.dict.json`：

```json
{
  "words": {
    "clean": { "alias": "清理" },
    "file": { "alias": "文件" },
    "files": { "alias": "文件" },
    "xml": { "alias": "XML" }
  }
}
```

> 也支持短语：例如你想把 `clean xml` 固定成“**清理\_XML**”，可在 `phrases` 里加 `"clean xml": { "alias": "清理-XML" }`。

---

# 现在你的这条就会变成

- `clean-xml-files.js` → **清理-XML-文件.js**（保留 `-` 和 `.js`）
- 如果第一次没词典，会先出 `clean-xml-files.js`，随后 **AI 只返回缺词映射**（如 `{ "clean":"清理","files":"文件" }`）→ 写入 `/.ai/.ai-glossary.literal.learned.json` → 立刻重建为 **清理-XML-文件.js**。

---

# 为何之前变成“cleanxmlfiles 模块”？

- 旧规则把分隔符去掉、中文后缀打开了（或把 `.js` 错配成“模块”）；
- 或者用了不保留分隔符的直译构建器（用 `joiner` 拼接且 `joiner=""`）。
- 修完上面的 **rebuild** 和 **配置** 就不会再发生。

---

# 小贴士（避免老记录干扰）

你已经把这个别名写入“学习词典”了。如果想用新规则重算，先清理一下这个路径的缓存/学习记录（右键“清除此节点缓存”，或删掉 `/.ai/.ai-glossary.learned.json` 里对应条目），再执行“翻译此文件”。

---

要不要我给你一份**精确到文件与行号**的补丁清单？照贴即可把“保留分隔符的直译+AI 兜底”彻底切上来。
