# ä¿®å¤æ€»ç»“ï¼šè…¾è®¯äº‘æ··å…ƒ AI ç¿»è¯‘å¤±è´¥é—®é¢˜

## ğŸ› é—®é¢˜ç°è±¡

ç”¨æˆ·é…ç½®äº†è…¾è®¯æ··å…ƒä½œä¸ºå…œåº• AI æä¾›å•†ï¼Œä½†ç¿»è¯‘ä»ç„¶å¤±è´¥ï¼Œæ˜¾ç¤ºï¼š

```
âŒ æ–‡ä»¶ AI ç¿»è¯‘å¤±è´¥ï¼ˆæ¥æºï¼šå›é€€ï¼‰
å¯èƒ½åŸå› ï¼š
1. AI æœåŠ¡æœªé…ç½®æˆ– API Key æ— æ•ˆ
2. ç½‘ç»œè¿æ¥é—®é¢˜
3. AI æœåŠ¡ä¸å¯ç”¨
```

æœåŠ¡çŠ¶æ€æ£€æŸ¥æ˜¾ç¤ºï¼š
```json
{
  "AIçŠ¶æ€": {
    "hunyuan": {
      "available": true
    }
  }
}
```

## ğŸ” æ ¹æœ¬åŸå› 

### 1. æ¦‚å¿µè¯¯è§£

**ä¹‹å‰çš„é”™è¯¯ç†è§£**ï¼š
- âŒ è®¤ä¸ºä½¿ç”¨"å…ƒå® App"çš„ API
- âŒ API Key æ ¼å¼ä¸º `SecretId.SecretKey`
- âŒ baseURL ä¸º `https://hunyuan.tencentcloudapi.com`

**æ­£ç¡®ç†è§£**ï¼š
- âœ… ä½¿ç”¨è…¾è®¯äº‘æ··å…ƒçš„ **OpenAI å…¼å®¹æ¥å£**
- âœ… API Key æ˜¯ä¸“ç”¨çš„ï¼ˆå¦‚ `hunyuan-xxxxxxxx`ï¼‰
- âœ… baseURL ä¸º `https://api.hunyuan.cloud.tencent.com/v1`

### 2. é…ç½®é”™è¯¯

**package.json ä¸­çš„é»˜è®¤é…ç½®**ï¼š
```json
"aiExplorer.hunyuanBaseUrl": {
  "default": "https://hunyuan.tencentcloudapi.com"  // âŒ é”™è¯¯
}

"aiExplorer.hunyuanModel": {
  "default": "hunyuan-lite",
  "enum": ["hunyuan-lite", "hunyuan-standard", "hunyuan-pro"]  // âš ï¸ ç¼ºå°‘æ¨èæ¨¡å‹
}
```

### 3. æ–‡æ¡£è¯¯å¯¼

- API Key æè¿°ä¸º `SecretId.SecretKey` æ ¼å¼
- æ²¡æœ‰æ˜ç¡®è¯´æ˜æ˜¯ OpenAI å…¼å®¹æ¥å£
- æ²¡æœ‰åŒºåˆ†"å…ƒå®"å’Œ"æ··å…ƒ"çš„æ¦‚å¿µ

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ 1ï¼šæ›´æ–°é»˜è®¤é…ç½®

**package.json**:
```json
"aiExplorer.hunyuanBaseUrl": {
  "default": "https://api.hunyuan.cloud.tencent.com/v1",  // âœ… æ­£ç¡®çš„ OpenAI å…¼å®¹æ¥å£
  "description": "è…¾è®¯äº‘æ··å…ƒ OpenAI å…¼å®¹æ¥å£åœ°å€ï¼ˆå®˜æ–¹ç«¯ç‚¹ï¼Œæ— éœ€ä¿®æ”¹ï¼‰"
}

"aiExplorer.hunyuanModel": {
  "default": "hunyuan-turbo",  // âœ… æ¨èæ¨¡å‹
  "enum": ["hunyuan-turbo", "hunyuan-lite", "hunyuan-pro", "hunyuan-standard"],
  "description": "è…¾è®¯äº‘æ··å…ƒæ¨¡å‹é€‰æ‹©ï¼ˆæ¨è hunyuan-turboï¼‰"
}

"aiExplorer.hunyuanApiKey": {
  "description": "è…¾è®¯äº‘æ··å…ƒ API Keyï¼ˆä»æ§åˆ¶å°è·å–ï¼Œé SecretId/SecretKeyï¼‰"  // âœ… æ˜ç¡®è¯´æ˜
}
```

### ä¿®æ”¹ 2ï¼šå¢å¼ºä»£ç æ³¨é‡Š

**MultiProviderAIClient.ts**:
```typescript
/**
 * å¤šæä¾›å•† AI å®¢æˆ·ç«¯
 * æ”¯æŒ OpenAIã€è…¾è®¯äº‘æ··å…ƒ OpenAI å…¼å®¹æ¥å£ç­‰å¤šä¸ª AI æä¾›å•†
 * 
 * æ¶æ„è¯´æ˜ï¼š
 * - ä½¿ç”¨ç»Ÿä¸€çš„ OpenAI SDK (openai npm åŒ…)
 * - é€šè¿‡åˆ‡æ¢ baseURL å’Œ apiKey å®ç°æä¾›å•†åˆ‡æ¢
 * - è…¾è®¯äº‘æ··å…ƒä½¿ç”¨å®˜æ–¹ OpenAI å…¼å®¹æ¥å£
 * - å…·å¤‡é™çº§å’Œæ•…éšœè½¬ç§»èƒ½åŠ›
 */

// è…¾è®¯äº‘æ··å…ƒé…ç½®ï¼ˆOpenAI å…¼å®¹æ¥å£ï¼‰
// å‚è€ƒæ–‡æ¡£ï¼šhttps://cloud.tencent.com/document/product/1729/111007
const client = new OpenAI({
    apiKey: hunyuanKey,  // è…¾è®¯äº‘æ··å…ƒä¸“ç”¨ API Keyï¼ˆé SecretId/SecretKeyï¼‰
    baseURL: hunyuanBaseUrl,  // OpenAI å…¼å®¹æ¥å£ç«¯ç‚¹
});
```

### ä¿®æ”¹ 3ï¼šå¢å¼ºé”™è¯¯æ—¥å¿—

```typescript
this.logger.debug(`[${providerName}] å‘é€è¯·æ±‚: model=${model}, maxTokens=${request.maxTokens}`);
this.logger.debug(`[${providerName}] è¯·æ±‚æˆåŠŸ: tokens=${response.usage?.total_tokens || 0}`);
this.logger.warn(
    `[${providerName}] è¯·æ±‚å¤±è´¥ (å°è¯• ${attempt}/${this.MAX_RETRIES}): ${errorMsg}`,
    error
);
```

### ä¿®æ”¹ 4ï¼šå®Œå–„æ–‡æ¡£

åˆ›å»ºäº†ä¸‰ä»½æ–°æ–‡æ¡£ï¼š

1. **è…¾è®¯æ··å…ƒé…ç½®æŒ‡å—.md**
   - æ˜ç¡®è¯´æ˜ä½¿ç”¨çš„æ˜¯ OpenAI å…¼å®¹æ¥å£
   - åŒºåˆ†"å…ƒå®"å’Œ"æ··å…ƒ"çš„æ¦‚å¿µ
   - æä¾›æ­£ç¡®çš„é…ç½®æ­¥éª¤
   - è­¦å‘Šä¸è¦ä½¿ç”¨éå®˜æ–¹æ–¹æ¡ˆ

2. **é…ç½®ç¤ºä¾‹.md**
   - ä¸‰ç§é…ç½®æ–¹æ¡ˆï¼ˆOpenAI / æ··å…ƒ / åŒé‡ä¿éšœï¼‰
   - å®Œæ•´é…ç½®é€‰é¡¹è¯´æ˜
   - å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

3. **è…¾è®¯äº‘æ··å…ƒé›†æˆ-æŠ€æœ¯ç»†èŠ‚.md**
   - OpenAI å…¼å®¹æ€§è¯¦è§£
   - æ¶æ„å›¾å’Œä»£ç ç¤ºä¾‹
   - è®¤è¯æœºåˆ¶å¯¹æ¯”
   - æœ€ä½³å®è·µ

## ğŸ“‹ å˜æ›´æ¸…å•

### ä»£ç å˜æ›´

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `package.json` | âœ… æ›´æ–° baseURL é»˜è®¤å€¼<br>âœ… è°ƒæ•´æ¨¡å‹æšä¸¾é¡ºåº<br>âœ… ä¼˜åŒ–é…ç½®æè¿° |
| `MultiProviderAIClient.ts` | âœ… å¢å¼ºæ³¨é‡Šè¯´æ˜<br>âœ… æ·»åŠ è°ƒè¯•æ—¥å¿—<br>âœ… ä¼˜åŒ–é”™è¯¯ä¿¡æ¯ |

### æ–‡æ¡£æ–°å¢

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `è…¾è®¯æ··å…ƒé…ç½®æŒ‡å—.md` | å®Œæ•´é…ç½®æŒ‡å—ï¼Œæ¾„æ¸…æ¦‚å¿µè¯¯åŒº |
| `é…ç½®ç¤ºä¾‹.md` | ä¸‰ç§é…ç½®æ–¹æ¡ˆå’Œæ•…éšœæ’æŸ¥ |
| `è…¾è®¯äº‘æ··å…ƒé›†æˆ-æŠ€æœ¯ç»†èŠ‚.md` | æŠ€æœ¯æ¶æ„å’Œå…¼å®¹æ€§è¯¦è§£ |

## ğŸ¯ ç”¨æˆ·æ“ä½œæŒ‡å—

### æ­¥éª¤ 1ï¼šè·å–æ­£ç¡®çš„ API Key

1. è®¿é—® [è…¾è®¯äº‘æ§åˆ¶å°](https://console.cloud.tencent.com/hunyuan)
2. å¼€é€š**æ··å…ƒå¤§æ¨¡å‹**æœåŠ¡
3. åœ¨ **API Key ç®¡ç†**ä¸­åˆ›å»º API Key
4. å¤åˆ¶ç”Ÿæˆçš„ API Keyï¼ˆæ ¼å¼ç±»ä¼¼ `hunyuan-xxxxxxxx`ï¼‰

### æ­¥éª¤ 2ï¼šé…ç½® VS Code

æ‰“å¼€è®¾ç½®ï¼ˆ`Ctrl+,`ï¼‰ï¼Œæœç´¢ `aiExplorer`ï¼š

```json
{
  "aiExplorer.hunyuanApiKey": "ä½ çš„API_Key",
  "aiExplorer.hunyuanBaseUrl": "https://api.hunyuan.cloud.tencent.com/v1",
  "aiExplorer.hunyuanModel": "hunyuan-turbo",
  "aiExplorer.provider.primary": "hunyuan"
}
```

### æ­¥éª¤ 3ï¼šéªŒè¯é…ç½®

1. æŒ‰ `Ctrl+Shift+P`
2. è¾“å…¥ `AI Explorer: æœåŠ¡çŠ¶æ€æ£€æŸ¥`
3. ç¡®è®¤è¾“å‡ºä¸­ `hunyuan.available: true`

### æ­¥éª¤ 4ï¼šæµ‹è¯•ç¿»è¯‘

1. å³é”®ç‚¹å‡»ä»»æ„æ–‡ä»¶
2. é€‰æ‹© `å¼ºåˆ¶ AI ç¿»è¯‘æ­¤æ–‡ä»¶`
3. æŸ¥çœ‹ç¿»è¯‘ç»“æœ

## ğŸ“Š ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰

```
âŒ API Key æ ¼å¼é”™è¯¯ï¼ˆè¦æ±‚ SecretId.SecretKeyï¼‰
âŒ baseURL æŒ‡å‘é”™è¯¯ç«¯ç‚¹
âŒ æ¨¡å‹åç§°ä¸åŒ¹é…
âŒ ç”¨æˆ·ä¸ç†è§£ä¸ºä»€ä¹ˆå¤±è´¥
```

### ä¿®å¤å

```
âœ… API Key æ ¼å¼æ˜ç¡®ï¼ˆä¸“ç”¨ API Keyï¼‰
âœ… baseURL æŒ‡å‘æ­£ç¡®çš„ OpenAI å…¼å®¹æ¥å£
âœ… æ¨èæ­£ç¡®çš„æ¨¡å‹ï¼ˆhunyuan-turboï¼‰
âœ… æ–‡æ¡£æ¸…æ™°ï¼Œæ¦‚å¿µæ˜ç¡®
âœ… è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å¸®åŠ©è¯Šæ–­
```

## ğŸ”„ åç»­å»ºè®®

### 1. æ·»åŠ é…ç½®å‘å¯¼

åˆ›å»ºä¸€ä¸ªäº¤äº’å¼é…ç½®å‘å¯¼å‘½ä»¤ï¼š
```
AI Explorer: é…ç½® AI æä¾›å•†
  â†’ é€‰æ‹©æä¾›å•† (OpenAI / è…¾è®¯æ··å…ƒ)
  â†’ è¾“å…¥ API Key
  â†’ é€‰æ‹©æ¨¡å‹
  â†’ æµ‹è¯•è¿æ¥
  â†’ ä¿å­˜é…ç½®
```

### 2. å¥åº·æ£€æŸ¥æ”¹è¿›

å®šæœŸå¥åº·æ£€æŸ¥å¹¶åœ¨çŠ¶æ€æ æ˜¾ç¤ºï¼š
```
çŠ¶æ€æ : AI Explorer [âœ“ OpenAI] [âœ— Hunyuan]
ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…å’Œåˆ‡æ¢æä¾›å•†
```

### 3. æ™ºèƒ½æç¤º

åœ¨é…ç½®æ—¶æä¾›æ™ºèƒ½æç¤ºï¼š
```typescript
if (apiKey.startsWith('sk-')) {
  // æ£€æµ‹åˆ° OpenAI Keyï¼Œè‡ªåŠ¨è®¾ç½® baseURL
} else if (apiKey.startsWith('hunyuan-')) {
  // æ£€æµ‹åˆ°æ··å…ƒ Keyï¼Œè‡ªåŠ¨è®¾ç½® baseURL å’Œæ¨èæ¨¡å‹
}
```

## ğŸ“ æ”¯æŒèµ„æº

- é…ç½®æŒ‡å—ï¼š`docs/è…¾è®¯æ··å…ƒé…ç½®æŒ‡å—.md`
- é…ç½®ç¤ºä¾‹ï¼š`docs/é…ç½®ç¤ºä¾‹.md`
- æŠ€æœ¯ç»†èŠ‚ï¼š`docs/è…¾è®¯äº‘æ··å…ƒé›†æˆ-æŠ€æœ¯ç»†èŠ‚.md`
- å®˜æ–¹æ–‡æ¡£ï¼šhttps://cloud.tencent.com/document/product/1729/111007

## âœ¨ æ€»ç»“

é€šè¿‡æœ¬æ¬¡ä¿®å¤ï¼š
1. âœ… æ¾„æ¸…äº†"å…ƒå®"ä¸"æ··å…ƒ"çš„æ¦‚å¿µå·®å¼‚
2. âœ… æ›´æ­£äº† API Key æ ¼å¼å’Œ baseURL é…ç½®
3. âœ… ä¼˜åŒ–äº†é»˜è®¤é…ç½®å’Œæ¨èæ¨¡å‹
4. âœ… å¢å¼ºäº†ä»£ç æ³¨é‡Šå’Œé”™è¯¯æ—¥å¿—
5. âœ… åˆ›å»ºäº†å®Œå–„çš„é…ç½®æ–‡æ¡£

ç”¨æˆ·ç°åœ¨å¯ä»¥æ­£ç¡®é…ç½®è…¾è®¯äº‘æ··å…ƒä½œä¸º AI æä¾›å•†ï¼Œå®ç°ç¨³å®šçš„æ–‡ä»¶åç¿»è¯‘åŠŸèƒ½ã€‚
