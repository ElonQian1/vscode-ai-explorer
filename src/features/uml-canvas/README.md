# æ¨¡å—ï¼šUML å›¾è¡¨ç”Ÿæˆå™¨ï¼ˆä¸–ç•Œç”»å¸ƒï¼‰

**æœç´¢æ ‡ç­¾**ï¼š`UML` `å›¾è¡¨` `ç”»å¸ƒ` `AST` `ä»£ç åˆ†æ` `å¯è§†åŒ–`

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å³é”®ä»£ç æ–‡ä»¶å¼¹å‡ºèœå•ï¼Œåœ¨ä¸–ç•Œç”»å¸ƒä¸Šç»˜åˆ¶ UML å›¾è¡¨ï¼Œæ”¯æŒç¼©æ”¾å’Œäº¤äº’ï¼Œé€šè¿‡ AI å°†ä»£ç å†…å®¹è½¬æ¢ä¸ºä¸­æ–‡ UML æ ‡ç­¾ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **ä»£ç è§£æ**ï¼šåˆ†æ TypeScriptã€JavaScriptã€Python ç­‰ä»£ç ç»“æ„
- **UML ç”Ÿæˆ**ï¼šç”Ÿæˆç±»å›¾ã€æ—¶åºå›¾ã€ä¾èµ–å›¾
- **ä¸–ç•Œç”»å¸ƒ**ï¼šæ”¯æŒæ— é™ç¼©æ”¾ã€æ‹–æ‹½çš„äº¤äº’å¼ç”»å¸ƒ
- **AI æ ‡æ³¨**ï¼šä½¿ç”¨ AI å°†è‹±æ–‡æ ‡è¯†ç¬¦è½¬æ¢ä¸ºä¸­æ–‡æ ‡ç­¾
- **å¤šæ ¼å¼å¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºä¸º PNGã€SVGã€PDF

## ğŸ“ ç›®å½•ç»“æ„

```
src/features/uml-canvas/
â”œâ”€â”€ UMLCanvasModule.ts              # æ¨¡å—å…¥å£
â”œâ”€â”€ app/                            # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ usecases/
â”‚   â”‚   â”œâ”€â”€ GenerateUMLUseCase.ts   # UML ç”Ÿæˆç”¨ä¾‹
â”‚   â”‚   â”œâ”€â”€ ParseCodeUseCase.ts     # ä»£ç è§£æç”¨ä¾‹
â”‚   â”‚   â””â”€â”€ ExportDiagramUseCase.ts # å¯¼å‡ºç”¨ä¾‹
â”‚   â””â”€â”€ services/                   # åº”ç”¨æœåŠ¡
â”œâ”€â”€ domain/                         # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ UMLGraph.ts             # UML å›¾å®ä½“
â”‚   â”‚   â”œâ”€â”€ CodeElement.ts          # ä»£ç å…ƒç´ å®ä½“
â”‚   â”‚   â””â”€â”€ DiagramLayout.ts        # å¸ƒå±€å®ä½“
â”‚   â””â”€â”€ ports/                      # ç«¯å£æ¥å£
â”‚       â”œâ”€â”€ ICodeParser.ts          # ä»£ç è§£æå™¨æ¥å£
â”‚       â”œâ”€â”€ ILayoutEngine.ts        # å¸ƒå±€å¼•æ“æ¥å£
â”‚       â””â”€â”€ IDiagramRenderer.ts     # æ¸²æŸ“å™¨æ¥å£
â”œâ”€â”€ infra/                          # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ parsers/                    # è§£æå™¨å®ç°
â”‚   â”‚   â”œâ”€â”€ TypeScriptParser.ts     # TS è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ PythonParser.ts         # Python è§£æå™¨
â”‚   â”‚   â””â”€â”€ JavaScriptParser.ts     # JS è§£æå™¨
â”‚   â”œâ”€â”€ layout/                     # å¸ƒå±€ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ HierarchicalLayout.ts   # å±‚æ¬¡å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ ForceLayout.ts          # åŠ›å¯¼å‘å¸ƒå±€
â”‚   â”‚   â””â”€â”€ GridLayout.ts           # ç½‘æ ¼å¸ƒå±€
â”‚   â””â”€â”€ renderers/                  # æ¸²æŸ“å®ç°
â”œâ”€â”€ panel/                          # Webview é¢æ¿
â”‚   â”œâ”€â”€ UMLCanvasPanel.ts           # é¢æ¿ç®¡ç†å™¨
â”‚   â””â”€â”€ messaging/                  # å‰åç«¯é€šä¿¡
â””â”€â”€ webview/                        # å‰ç«¯èµ„æº
    â”œâ”€â”€ src/                        # å‰ç«¯æºç 
    â”‚   â”œâ”€â”€ canvas/                 # ç”»å¸ƒç»„ä»¶
    â”‚   â”œâ”€â”€ diagrams/               # å›¾è¡¨ç»„ä»¶
    â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
    â”œâ”€â”€ dist/                       # æ„å»ºè¾“å‡º
    â””â”€â”€ package.json                # å‰ç«¯ä¾èµ–
```

## ğŸš€ ä¸»è¦å…¥å£æ–‡ä»¶

- **æ¨¡å—æ¿€æ´»**ï¼š`UMLCanvasModule.ts`
- **UML ç”Ÿæˆ**ï¼š`app/usecases/GenerateUMLUseCase.ts`
- **é¢æ¿ç®¡ç†**ï¼š`panel/UMLCanvasPanel.ts`
- **ä»£ç è§£æ**ï¼š`infra/parsers/TypeScriptParser.ts`

## ğŸ”§ å˜æ›´å…¥å£ï¼ˆå¸¸æ”¹æ–‡ä»¶ï¼‰

- `app/usecases/GenerateUMLUseCase.ts` - UML ç”Ÿæˆé€»è¾‘
- `infra/parsers/*.ts` - ä»£ç è§£æå®ç°
- `panel/UMLCanvasPanel.ts` - Webview é€šä¿¡
- `webview/src/canvas/` - å‰ç«¯ç”»å¸ƒå®ç°
- `@core/ai/PromptProfiles.ts` - UML ç”Ÿæˆæç¤ºæ¨¡æ¿

## ğŸš« æ¨¡å—è¾¹ç•Œçº¦æŸ

- **ç¦æ­¢**ç›´æ¥ import `explorer-alias/*`ï¼ˆè·¨æ¨¡å—è®¿é—®è¯·é€šè¿‡ `@core` æˆ– `@shared`ï¼‰
- **ç¦æ­¢**ç›´æ¥æ“ä½œ DOMï¼ˆåœ¨ Webview ä¸­è¿›è¡Œï¼‰
- **ç¦æ­¢**ç›´æ¥è°ƒç”¨ OpenAI APIï¼ˆè¯·é€šè¿‡ `@core/ai/OpenAIClient`ï¼‰
- **ç¦æ­¢**åœ¨åç«¯è¿›è¡Œå›¾å½¢æ¸²æŸ“ï¼ˆæ¸²æŸ“åœ¨ Webview å‰ç«¯å®Œæˆï¼‰

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. ä»£ç è§£æç»“æœè¦è½¬æ¢ä¸ºç»Ÿä¸€çš„ IRï¼ˆä¸­é—´è¡¨ç¤ºï¼‰
2. ä½¿ç”¨ `uml-generation` å’Œ `code-comment-translation` æç¤ºé…ç½®
3. ç¼“å­˜é”®å¿…é¡»åŒ…å«æ¨¡å— IDï¼š`uml-canvas`
4. Webview ä¸æ‰©å±•åç«¯é€šè¿‡æ¶ˆæ¯é€šä¿¡
5. å‰ç«¯ä½¿ç”¨ D3.js æˆ– vis.js è¿›è¡Œå›¾è¡¨æ¸²æŸ“
6. æ”¯æŒå¢é‡æ›´æ–°å’Œå®æ—¶é¢„è§ˆ